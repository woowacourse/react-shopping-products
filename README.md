# 🎁 상품 목록 2단계

상품 목록 확인, 필터링·정렬, 장바구니 기능을 갖춘 웹을 기반으로, 일관된 인터페이스의 데이터 패칭 훅과 MSW를 활용한 다양한 서버 응답 시뮬레이션 및 UI 처리·테스트가 가능한 구조로 확장한다.

# 기능 요구사항

## 상품 목록

- [ ] 상품 목록에서 담기 버튼을 누르면, 수량을 조절할 수 있다.
  - [ ] 수량을 조절할 수 있는 UI가 있어야 한다.
- [ ] 상품의 수량이 0 이면, 품절 UI 를 보여준다.
- [ ] 상품의 현재 수량을 초과하여 담지 못하게 한다.
  - [ ] 만약 초과하여 담는 것을 시도할 경우 에러 메시지를 보여준다.

## 장바구니 모달

- [ ] 장바구니 버튼을 클릭하면 모달로 장바구니에 담은 목록을 확인할 수 있어야 한다.
  - [ ] 직접 만든 modal 라이브러리를 이용하여 사용한다.
- [ ] 모달에서 장바구니 수량을 조절할 수 있어야 한다.
  - [ ] 수량을 조절할 수 있다.
  - [ ] 삭제 버튼을 클릭시 삭제할 수 있다.

## 상품 수량 관리

- [ ] 상품 목록에서 담기 버튼을 누르면 수량을 조절할 수 있다.
- [ ] 상품의 수량이 0이면 품절 UI를 보여준다.
- [ ] 상품의 현재 수량을 초과하여 담지 못하게 한다.

## 에러 처리

- [ ] 재고 수량을 초과하여 장바구니에 담으려고 하면 에러 메시지를 표시한다.
- [ ] 서버 API 에러 상황에 대한 적절한 에러 메시지를 표시한다.

# 프로그래밍 요구사항

## 배포

- 리뷰어가 쉽게 확인할 수 있도록, 개발환경 뿐만 아니라, 프로덕션 환경에서도 MSW 를 start 한다.

## Data Fetching Hook

- 서버 API 통신 결과를 Single Source of Truth (SSOT) 원칙에 따라 관리할 수 있도록, 커스텀 훅을 직접 개발한다.
- GET method 를 사용하는 모든 API 에 이 커스텀 훅을 적용한다.
- GET /cart-items , GET /products API 를 통일된 인터페이스로 data fetching 할 수 있어야 한다.
- ex) useData, useResource 등의 이름으로 선언할 수 있다.
- 반환값에는 데이터, 로딩 여부, 에러 정보 등이 포함되어야 한다.

## Context API

- Context API 를 활용한다. 단, API 마다 Provider 를 따로 만들지 않고, 하나의 Context 에서 관리할 수 있어야 한다.
- Context API 사용으로 인한 렌더링 문제는 해결하지 않아도 된다. 문제점은 학습하여 인지하도록 한다.
- 상용 라이브러리의 인터페이스를 그대로 모방하지 않는다. 구조를 직접 설계한다.

## MSW (Mock Service Worker)

- 안정적인 테스트 환경을 만들기 위해 MSW 를 사용한다.
- 서버 API 의 다양한 케이스를 MSW 와 RTL 을 활용하여 테스트한다.
- 서버 API 를 시뮬레이션 하기 위해 MSW 를 사용한다.
- 서버 API 에서 아직 구현되지 않은 부분을 MSW 를 통해 미리 테스트해본다. 서버와 협의했지만, 서버가 구현되지 않은 API 스펙은 다음과 같다.

## API 스펙 처리

- 모든 API 의 상품 타입에 남은 수량(quantity) 필드 추가
- 재고를 초과하여 장바구니를 담으려고 하면 에러 발생 (OUT_OF_STOCK)
- PATCH /cart-items/{id} 도 동일하게 처리
