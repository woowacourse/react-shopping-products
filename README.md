# 상품 목록

> react-shopping-products
> FE 레벨2 상품 목록 미션

[🔗 웹페이지 배포 주소](https://thgml05.github.io/react-shopping-products)

<br>

## 🎯 기능 요구 사항

## [Step1] 🎨 1단계

### 1. 💳 상품 목록 조회

- [x] 상품 목록 섹션에 최대 20개의 상품을 보여준다.
  - ex. 전체 카테고리 size 20개로 요청, 세부 카테고리 size 20개로 요청

### 2. 상품 정렬 및 필터링

- [x] 상품을 카테고리에 따라 필터링한다.
  - [x] 카테고리는 "식료품", "패션잡화" 로 한정한다.
- [x] 상품을 가격에 따라 정렬한다.
  - [x] 낮은 가격 순
  - [x] 높은 가격 순

### 3. 상품 장바구니 담기

- [x] 사용자가 담기 버튼을 누르면, 장바구니에 추가된다.
- [x] 장바구니에 담긴 아이템 '종류'의 개수로 숫자를 표시한다.
  - 아이템의 종류는 id 로 판단한다.
  - 전체 장바구니에 1개의 아이템을 100개 담았다고 했을 때, 1개로 표시한다.
- [x] 장바구니 담기 요청 중 에러가 발생한 경우, 에러 메시지를 사용자에게 알려주는 UI를 표시한다.
- [x] 장바구니에서 빼기 버튼을 누르면, 장바구니에서 해당 아이템이 제거된다.
- [x] 장바구니에 담긴 아이템 종류의 최대 개수는 50개이다.

<br>

## ✅ 프로그래밍 요구사항

- API 명세

  - API 명세(Swagger)를 참고하여, 상품 목록 데이터, 장바구니 데이터를 불러오고 수정한다.
  - 관리자 페이지에서 상품 추가 및 삭제가 가능하다.
  - 설정을 확인할 수 있다.
  - 계정 정보
    - email: github username, password: 'password'
  - [x] GET /products API 에서, 정렬(sort)은 {sortKey},{sortOrder}형식으로 요청한다.
    - ex) price,asc
    - sortKey 에는 price, name, id 등 상품이 가지는 속성이 들어가고, sortOrder 는 asc, desc 가 들어간다.
    - sort 가 여러개의 기준을 가질 수 있다.
      - ex) ["price,asc", "id,desc"]
    - [x] 가격은 오름차순, 가격이 동일하다면 id 내림차순

- API

  - [x] API 요청 중에는 로딩 상태를 나타내는 UI (예: 텍스트 메시지, 스피너, 스켈레톤 등)를 표시한다.
  - [x] API 요청 중 에러가 발생한 경우, 에러 메시지를 사용자에게 알려주는 UI를 표시한다.
  - [x] 장바구니 개수는 /cart-items/count API 를 사용하지 않는다. /cart-items 의 응답에서 추출한다. page=1, size=50 으로 요청하도록 한다.

- Test

  - [x] RTL을 활용하여 주요 기능 플로우에 대한 테스트를 작성한다.
  - API 요청이 포함된 컴포넌트의 테스트가 어려운 경우, 다음 순서를 고려한다.
    - [x] 테스트가 가능한 컴포넌트 단위로 분리하거나, 작은 단위의 테스트를 먼저 고민한다.
    - [x] 간단한 수준의 API Mocking으로 흐름 테스트를 구성한다. (jest.fn, jest.spyOn 등)
    - 위 방식이 어렵게 느껴진다면 실제 API를 직접 호출하여 테스트해도 무방하다.

- Library
  - [x] 스타일링에는 CSS Module, styled-components, emotion 중 한 가지를 선택하여 사용한다.
  - [x] 명시된 라이브러리 외에는 사용하지 않고 직접 구현한다.

<br>

## 📝 커밋 메시지

- feat : 새로운 기능을 추가한 경우
- fix : 버그 수정
- docs : 문서를 수정한 경우
- style : 코드 스타일, 포멧, 주석을 변경
- design: CSS 등 사용자 UI 디자인 변경
- refactor : 코드 리팩토링
- test : 테스트 관련 코드를 수정한 경우
- chore : 코드 수정이 아닌, 단순 폴더명 파일명 등을 수정한 경우
- remove: 파일이나 로직을 삭제한 경우

## step2

### 기능 요구 사항

- 상품 목록 섹션
  - [x] 상품 목록에서 담기 버튼을 누르면, 수량을 조절할 수 있다.
    - [x] 상품 목록에서 담기 버튼을 누르면, 수량을 조절할 수 있는 UI를 보여준다.
    - [x] - / - 버튼을 통해 장바구니에 담긴 상품 수량을 조절할 수 있다.
    - [x] API 요청을 통해 개수를 반영한다.
    - [x] 장바구니에 담긴 상품 수량이 조절되면 장바구니 아이콘에 표시된 개수도 변경된다.
  - [x] 서버 수량 반영
    - [x] 상품의 수량이 0 이면, 품절 UI 를 보여준다.
    - [x] 상품의 현재 수량을 초과하여 담지 못하게 한다.
      - [x] 토스트를 통해 에러 메시지를 표시한다.
      - [x] 장바구니에 50개를 넘는 아이템을 장바구니에 담으려고 하면 토스트를 표시한다.
  - [x] step1 에서 구현해둔 에러 메시지를 표시하는 UI 를 그대로 활용하여 표시한다.
- 장바구니 모달
  - [x] 장바구니 버튼을 클릭하면 모달로 장바구니에 담은 목록을 확인할 수 있어야 한다.
    - [x] 장바구니 버튼 클릭 시 모달 창을 띄운다.
  - [x] 모달에서 장바구니 수량을 조절할 수 있어야 한다.
    - [x] API를 불러와서 장바구니에 담긴 상품 정보를 모달에 띄운다.
    - [x] 각 상품마다 + / - 버튼을 통해 수량 조절이 가능하다.
    - [x] 삭제 버튼을 통해 장바구니에 담긴 상품을 제거할 수 있다.
    - [x] 총 결제 금액을 계산해서 표시해준다.
    - [x] 닫기 버튼을 통해 장바구니 모달 창을 닫을 수 있다.

### 프로그래밍 요구 사항

- Data fetching hook
  - [x] 서버 API 통신 결과를 Single Source of Truth (SSOT) 원칙에 따라 관리할 수 있도록, 커스텀 훅을 직접 개발한다.
    - [x] 즉, 같은 데이터를 사용하는 여러 컴포넌트가 동일한 데이터를 참조하고, 한쪽에서 상태가 바뀌면 나머지 컴포넌트에서도 자동으로 반영되어야 한다.
  - [x] GET method 를 사용하는 모든 API 에 이 커스텀 훅을 적용한다.
    - [x] GET /cart-items , GET /products API 를 통일된 인터페이스로 data fetching 할 수 있어야 한다.
    - [x] ex) useData, useResource 등의 이름으로 선언할 수 있다.
  - [x] 데이터, 로딩 여부, 에러 정보 등을 관리할 수 있어야 한다.
  - [x] Context API를 활용하길 권장한다.
    - [x] Context API 사용으로 인한 렌더링 문제는 해결하지 않아도 된다. 문제점은 학습하여 인지하도록 한다.
  - [x] 상용 라이브러리 인터페이스를 무분별하게 따라하는 것을 경계한다.
- MSW
  - [ ] 안정적인 테스트 환경을 만들기 위해 MSW 를 사용한다.
  - [ ] 서버 API 의 다양한 케이스를 MSW 와 RTL 을 활용하여 테스트한다.
  - [x] 서버 API 를 시뮬레이션 하기 위해 MSW 를 사용한다.
  - [x] 서버 API 에서 아직 구현되지 않은 부분을 MSW 를 통해 미리 테스트해본다. 서버와 협의했지만, 서버가 구현되지 않은 API 스펙은 다음과 같다.
- 배포
  - [x] 리뷰어가 쉽게 확인할 수 있도록, 개발환경 뿐만 아니라, 프로덕션 환경에서도 MSW 를 start 한다.
- Library
  - [x] 스타일링에는 CSS Module, styled-components, emotion 중 한 가지를 선택하여 사용한다.
  - [x] 명시된 라이브러리 외에는 사용하지 않고 직접 구현한다.
